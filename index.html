<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ø³ØªØ§Ø¯ ÙØ±Ø§ØªÛŒ</title>
  <style>
    :root{
      --bg1:#0b1023;
      --bg2:#1b1240;
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --glow: rgba(255,120,200,.55);
      --glow2: rgba(120,170,255,.45);

      /* performance knobs */
      --glass-blur: 14px;
      --shadow-hero: 0 24px 70px rgba(0,0,0,.35);
      --shadow-card: 0 24px 60px rgba(0,0,0,.28);
      --noise-opacity: .18;
      --ring-opacity: .55;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Vazirmatn", "IRANSans", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 900px at 10% 10%, rgba(122,183,255,.18), transparent 60%),
        radial-gradient(1000px 800px at 90% 20%, rgba(255,118,200,.15), transparent 60%),
        radial-gradient(800px 700px at 50% 90%, rgba(142,255,193,.10), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed; inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
      opacity:var(--noise-opacity);
      pointer-events:none;
    }

    /* Mobile performance: reduce blur/shadows/noise/ring intensity */
    @media (max-width: 640px){
      :root{
        --glass-blur: 6px;        /* smaller blur = faster */
        --shadow-hero: 0 16px 44px rgba(0,0,0,.30);
        --shadow-card: 0 16px 40px rgba(0,0,0,.24);
        --noise-opacity: .10;
        --ring-opacity: .38;
      }
    }

    /* Very low motion users */
    @media (prefers-reduced-motion: reduce){
      :root{ --ring-opacity: .18; }
    }

    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding:40px 18px 70px;
      position:relative;
    }
    .shell{ width:min(1050px, 100%); position:relative; }

    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; padding:10px 2px 18px; opacity:.92;
    }

    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border-radius:999px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      user-select:none;
      -webkit-backdrop-filter: blur(var(--glass-blur));
      backdrop-filter: blur(var(--glass-blur));
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, white, rgba(255,118,200,.85));
      box-shadow: 0 0 18px var(--glow);
    }

    .toggle{
      cursor:pointer; border:none; color:var(--text);
      font-weight:600; padding:10px 14px; border-radius:999px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      -webkit-backdrop-filter: blur(var(--glass-blur));
      backdrop-filter: blur(var(--glass-blur));
      transition: transform .12s ease, box-shadow .2s ease;
    }
    .toggle:active{transform:scale(.98)}
    .toggle:hover{box-shadow:0 0 0 1px rgba(255,255,255,.10), 0 10px 30px rgba(0,0,0,.25)}

    .hero{
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border-radius:26px;
      -webkit-backdrop-filter: blur(var(--glass-blur));
      backdrop-filter: blur(var(--glass-blur));
      box-shadow: var(--shadow-hero);
      position:relative;
      overflow:hidden;
      contain: layout paint; /* helps mobile browsers */
    }

    .hero::after{
      content:"";
      position:absolute; inset:-2px;
      background: conic-gradient(from 0deg,
        rgba(255,118,200,.0),
        rgba(255,118,200,.55),
        rgba(122,183,255,.55),
        rgba(142,255,193,.4),
        rgba(255,118,200,.55),
        rgba(255,118,200,.0));
      filter: blur(16px);
      opacity: var(--ring-opacity);
      z-index:0;
      animation: spin 10s linear infinite;
      pointer-events:none;
      will-change: transform;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    @media (prefers-reduced-motion: reduce){
      .hero::after{animation:none}
    }

    .heroInner{ position:relative; z-index:1; padding:28px 22px 20px; }

    .mainHeader{
      text-align:center;
      margin: 8px auto 10px;
      line-height:1.6;
      font-weight:900;
      font-size: clamp(22px, 3.2vw, 40px);
      text-shadow: 0 0 18px rgba(255,118,200,.30), 0 0 24px rgba(122,183,255,.20);
      user-select:none;
      transform: translateZ(0);
      will-change: transform;
    }
    .mainHeader .handle{
      display:block;
      font-size: clamp(14px, 1.8vw, 18px);
      font-weight:700;
      color:var(--muted);
      margin-top:6px;
    }
    .mainHeader .sub{
      display:block;
      font-size: clamp(14px, 2vw, 20px);
      font-weight:800;
      margin-top:10px;
      color: rgba(255,255,255,.86);
    }

    .controls{
      display:flex; flex-wrap:wrap; justify-content:center;
      gap:10px; padding:14px 0 10px;
    }
    .pill{
      cursor:pointer; border:none;
      padding:11px 14px; border-radius:999px;
      color:var(--text);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      -webkit-backdrop-filter: blur(var(--glass-blur));
      backdrop-filter: blur(var(--glass-blur));
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
      font-weight:700;
      display:inline-flex; align-items:center; gap:8px;
    }
    .pill:hover{ box-shadow: 0 0 0 1px rgba(255,255,255,.10), 0 16px 40px rgba(0,0,0,.28); filter: brightness(1.06); }
    .pill:active{transform:scale(.98)}
    .emoji{filter: drop-shadow(0 6px 14px rgba(0,0,0,.25))}

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
      margin-top: 14px;
    }
    .card{
      grid-column: span 12;
      padding:16px 16px 14px;
      border-radius:20px;
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      backdrop-filter: blur(var(--glass-blur));
      position:relative;
      overflow:hidden;
      transition: transform .18s ease, box-shadow .25s ease;
      contain: paint;
    }
    .card:hover{ transform: translateY(-2px); box-shadow: var(--shadow-card); }
    .card h3{ margin:0 0 6px; font-size:18px; }
    .card p{ margin:0; color:var(--muted); line-height:1.7; font-size:14px; }
    @media (min-width: 860px){
      .card.span6{grid-column: span 6}
      .card.span4{grid-column: span 4}
    }

    .girls{
      position:absolute;
      inset:-40px -30px auto -30px;
      height:340px;
      pointer-events:none;
      opacity:.34;
      transform: translateZ(0);
      will-change: transform;
    }
    .girls svg{width:100%; height:100%}
    .girlGlow{
      filter: drop-shadow(0 0 18px rgba(255,118,200,.25))
              drop-shadow(0 0 18px rgba(122,183,255,.18));
    }
    @media (max-width: 640px){
      .girlGlow{ filter: none; } /* big win on some phones */
    }

    #sparkCanvas{
      position:fixed; inset:0;
      z-index:2;
      pointer-events:none;
    }

    .toast{
      position:fixed;
      right:16px; bottom:16px;
      z-index:5;
      max-width:min(420px, calc(100% - 32px));
      padding:12px 14px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background: rgba(18,18,40,.55);
      -webkit-backdrop-filter: blur(var(--glass-blur));
      backdrop-filter: blur(var(--glass-blur));
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      opacity:0; transform: translateY(10px);
      transition: opacity .2s ease, transform .2s ease;
      font-weight:700;
      color:rgba(255,255,255,.90);
    }
    .toast.show{opacity:1; transform: translateY(0)}
    .toast small{display:block; margin-top:4px; font-weight:600; color:var(--muted)}
  </style>
</head>
<body>
  <canvas id="sparkCanvas"></canvas>

  <div class="wrap">
    <div class="shell">

      <div class="topbar">
        <div class="badge" title="Ø­Ø§Ù„Øª Ø§Ù†Ø±Ú˜ÛŒ">
          <span class="dot" aria-hidden="true"></span>
          <span id="moodText">Ø­Ø§Ù„Øª: ğŸ˜”</span>
        </div>
        <button class="toggle" id="themeBtn" type="button">ØªØºÛŒÛŒØ± Ø­Ø§Ù„â€ŒÙˆÙ‡ÙˆØ§ âœ¨</button>
      </div>

      <section class="hero" id="hero">
        <div class="girls" id="girlsLayer" aria-hidden="true">
          <svg viewBox="0 0 1200 340" class="girlGlow" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(255,118,200,.70)"/>
                <stop offset="1" stop-color="rgba(122,183,255,.55)"/>
              </linearGradient>
              <linearGradient id="g2" x1="1" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="rgba(142,255,193,.55)"/>
                <stop offset="1" stop-color="rgba(255,118,200,.50)"/>
              </linearGradient>
            </defs>

            <g transform="translate(120 50)">
              <path fill="url(#g1)" opacity=".9"
                d="M160,250 c20,-60 5,-110 -10,-135 c-25,-45 -10,-85 25,-95
                   c30,-10 70,10 75,45 c10,60 -40,70 -45,95 c-5,25 35,35 45,90
                   c-40,20 -90,20 -90,0z"/>
              <circle cx="190" cy="70" r="32" fill="rgba(255,255,255,.12)"/>
              <path fill="rgba(255,255,255,.10)"
                d="M165,92 c10,18 40,18 50,0 c-18,22 -32,26 -50,0z"/>
            </g>

            <g transform="translate(520 25)">
              <path fill="url(#g2)" opacity=".9"
                d="M210,275 c10,-70 -10,-130 -35,-160 c-35,-45 -20,-95 20,-112
                   c48,-20 100,18 102,70 c1,44 -30,56 -46,74 c-16,18 6,34 18,60
                   c18,40 24,58 16,80 c-28,22 -60,26 -75,14z"/>
              <circle cx="225" cy="78" r="34" fill="rgba(255,255,255,.12)"/>
              <path fill="rgba(0,0,0,.10)"
                d="M190,110 c16,10 48,10 68,0 c-18,22 -50,26 -68,0z"/>
            </g>

            <g transform="translate(880 65)">
              <path fill="url(#g1)" opacity=".85"
                d="M170,245 c18,-50 12,-92 -6,-126 c-18,-34 -16,-66 8,-86
                   c28,-24 78,-10 92,28 c10,28 -2,44 -18,60 c-16,16 -6,28 10,54
                   c18,30 26,56 24,80 c-30,18 -76,14 -110,-10z"/>
              <circle cx="210" cy="74" r="30" fill="rgba(255,255,255,.12)"/>
            </g>
          </svg>
        </div>

        <div class="heroInner">
          <h1 class="mainHeader" id="mainHeader">
            Ø§Ø³ØªØ§Ø¯ ÙØ±Ø§ØªÛŒ<br/>
            <span class="handle">@sforati</span>
            <span class="sub">ØªÙ…Ø¯ÛŒØ¯ Ø¯Ø± Ú©Ù…ÛŒÙ† Ø§Ø³Øª Ù…Ú¯Ù‡ Ù†Ù‡ØŸğŸ˜”</span>
          </h1>

          <div class="controls">
            <button class="pill" id="btnCheer" type="button"><span class="emoji">ğŸŒ¸</span> ÛŒÙ‡ Ú©Ù… Ø±ÙˆØ­ÛŒÙ‡ Ø¨Ø¯Ù‡</button>
            <button class="pill" id="btnSpark" type="button"><span class="emoji">âœ¨</span> Ø¨Ø§Ø±ÙˆÙ†Ù Ø³ØªØ§Ø±Ù‡â€ŒØ§ÛŒ</button>
            <button class="pill" id="btnWink" type="button"><span class="emoji">ğŸ˜‰</span> Ú†Ø´Ù…Ú© Ø§Ù†ÛŒÙ…Ù‡â€ŒØ§ÛŒ</button>
            <button class="pill" id="btnCopy" type="button"><span class="emoji">ğŸ“‹</span> Ú©Ù¾ÛŒ Ù…ØªÙ†</button>
          </div>

          <div class="grid">
            <div class="card span6" id="card1">
              <h3>Ú©Ù„ÛŒÚ© Ú©Ù† ØªØ§ ÙˆØ§Ú©Ù†Ø´ Ø¨Ø¨ÛŒÙ†ÛŒ ğŸ€</h3>
              <p>Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø³Ø¨Ú©â€ŒØªØ±Ø´ Ú©Ø±Ø¯ÛŒÙ… Ú©Ù‡ Ø±ÙˆÙˆÙ†â€ŒØªØ± Ø¨Ø§Ø´Ù‡.</p>
            </div>
            <div class="card span6" id="card2">
              <h3>Ù¾Ø§Ø±Ø§Ù„Ø§Ú©Ø³ Ø§Ù†ÛŒÙ…Ù‡â€ŒØ§ÛŒ ğŸ‘€</h3>
              <p>Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯: ÙÙ‚Ø· ÛŒÚ©â€ŒØ¨Ø§Ø± Ø¯Ø± Ù‡Ø± ÙØ±ÛŒÙ… Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù‡ (Ú©Ù…â€ŒÙ…ØµØ±Ùâ€ŒØªØ±).</p>
            </div>
            <div class="card span4" id="card3">
              <h3>Ø­Ø§Ù„Øª Ø§Ù…Ø±ÙˆØ²</h3>
              <p>Ø¨ÛŒÙ† ğŸ˜” Ùˆ ğŸ˜¼ Ùˆ ğŸ˜³ Ùˆ ğŸ˜ ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡.</p>
            </div>
            <div class="card span4" id="card4">
              <h3>Ø­Ø§Ù„Øª Ø´Ø¨/Ù†Ø¦ÙˆÙ†</h3>
              <p>Ù¾Ø§Ù„Øª Ø±Ù†Ú¯ÛŒ Ø¹ÙˆØ¶ Ù…ÛŒâ€ŒØ´Ù‡ØŒ ÙˆÙ„ÛŒ Ø³Ù†Ú¯ÛŒÙ† Ù†Ù…ÛŒâ€ŒØ´Ù‡.</p>
            </div>
            <div class="card span4" id="card5">
              <h3>Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</h3>
              <p>DPR Ù…Ø­Ø¯ÙˆØ¯ + Ø³Ù‚Ù ØªØ¹Ø¯Ø§Ø¯ Ø°Ø±Ø§Øª + FPS Ú©Ù…ØªØ± Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„.</p>
            </div>
          </div>
        </div>
      </section>

    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // --- Toast helper
    const toastEl = document.getElementById("toast");
    let toastTimer = null;
    function toast(msg, sub=""){
      toastEl.innerHTML = `${msg}${sub?`<small>${sub}</small>`:""}`;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toastEl.classList.remove("show"), 2200);
    }

    // --- Adaptive performance profile
    const isSmall = matchMedia("(max-width: 640px)").matches;
    const isMobileUA = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent || "");
    const saveData = navigator.connection?.saveData === true;
    const lowMem = (navigator.deviceMemory && navigator.deviceMemory <= 4);
    const lowPower = isSmall || isMobileUA || saveData || lowMem;

    // Cap DPR (huge win on mobile)
    const DPR_CAP = lowPower ? 1.25 : 2;

    // Target FPS (30 on lowPower devices)
    const TARGET_FPS = lowPower ? 30 : 60;
    const FRAME_MS = 1000 / TARGET_FPS;

    // Max spark count
    const MAX_SPARKS = lowPower ? 220 : 650;

    // Ambient emission rate
    const AMBIENT_INTERVAL_MS = lowPower ? 320 : 180;

    // --- Theme toggle
    const themeBtn = document.getElementById("themeBtn");
    let altTheme = false;
    themeBtn.addEventListener("click", ()=>{
      altTheme = !altTheme;
      document.documentElement.style.setProperty("--bg1", altTheme ? "#070a14" : "#0b1023");
      document.documentElement.style.setProperty("--bg2", altTheme ? "#201035" : "#1b1240");
      document.documentElement.style.setProperty("--glow", altTheme ? "rgba(142,255,193,.55)" : "rgba(255,120,200,.55)");
      document.documentElement.style.setProperty("--glow2", altTheme ? "rgba(255,118,200,.40)" : "rgba(120,170,255,.45)");
      toast(altTheme ? "Ø­Ø§Ù„Øª: Ù†Ø¦ÙˆÙ†Ù Ø´Ø¨ ğŸŒ™âœ¨" : "Ø­Ø§Ù„Øª: Ø¢Ø³Ù…ÙˆÙ†Ù Ø¨Ù†ÙØ´ ğŸ’œ", "Ù¾Ø§Ù„Øª Ø±Ù†Ú¯ÛŒ Ø¹ÙˆØ¶ Ø´Ø¯.");
    });

    // --- Mood switching
    const moodText = document.getElementById("moodText");
    const moods = ["ğŸ˜”","ğŸ˜¼","ğŸ˜³","ğŸ˜","ğŸ¥²","ğŸ« "];
    let moodIdx = 0;

    function setMood(i){
      moodIdx = (i + moods.length) % moods.length;
      const m = moods[moodIdx];
      moodText.textContent = `Ø­Ø§Ù„Øª: ${m}`;
      const map = {
        "ğŸ˜”":["rgba(255,120,200,.55)","rgba(120,170,255,.45)"],
        "ğŸ˜¼":["rgba(142,255,193,.55)","rgba(255,118,200,.40)"],
        "ğŸ˜³":["rgba(255,255,255,.40)","rgba(255,118,200,.45)"],
        "ğŸ˜":["rgba(122,183,255,.55)","rgba(142,255,193,.35)"],
        "ğŸ¥²":["rgba(120,170,255,.55)","rgba(255,118,200,.35)"],
        "ğŸ« ":["rgba(255,118,200,.55)","rgba(142,255,193,.35)"]
      };
      const [g1,g2]= map[m] || map["ğŸ˜”"];
      document.documentElement.style.setProperty("--glow", g1);
      document.documentElement.style.setProperty("--glow2", g2);
    }

    // --- Sparkle canvas (optimized: DPR cap, pooling, swap-remove, optional glow pass)
    const canvas = document.getElementById("sparkCanvas");
    const ctx = canvas.getContext("2d", { alpha: true });
    let W=0,H=0, dpr=1;

    const sparks = [];
    const pool = [];

    function resize(){
      dpr = Math.min(window.devicePixelRatio || 1, DPR_CAP);
      W = canvas.width  = Math.floor(window.innerWidth  * dpr);
      H = canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width  = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
    }
    window.addEventListener("resize", resize, {passive:true});
    resize();

    function allocSpark(){
      return pool.pop() || {x:0,y:0,vx:0,vy:0,life:0,size:0};
    }

    function addSparks(x,y,count=24, burst=false){
      // Clamp emission on lowPower devices
      if (lowPower) count = Math.min(count, burst ? 45 : 12);

      // Keep a hard cap
      const room = MAX_SPARKS - sparks.length;
      if (room <= 0) return;
      count = Math.min(count, room);

      const sx = x * dpr;
      const sy = y * dpr;

      for(let i=0;i<count;i++){
        const a = Math.random()*Math.PI*2;
        const sp = burst ? (2.0 + Math.random()*3.2) : (0.5 + Math.random()*1.8);
        const s = allocSpark();
        s.x = sx; s.y = sy;
        s.vx = Math.cos(a)*sp*dpr;
        s.vy = Math.sin(a)*sp*dpr;
        s.life = 22 + Math.random()*22;
        s.size = 1 + Math.random()*2.0;
        sparks.push(s);
      }
    }

    let lastFrameT = 0;
    let ambientT = 0;

    function loop(t){
      requestAnimationFrame(loop);

      // FPS limiter
      if (t - lastFrameT < FRAME_MS) return;
      const dt = t - lastFrameT;
      lastFrameT = t;

      ctx.clearRect(0,0,W,H);

      // ambient sparkle
      ambientT += dt;
      if (ambientT >= AMBIENT_INTERVAL_MS){
        ambientT = 0;
        addSparks(Math.random()*innerWidth, -10, 3, false);
      }

      // draw sparks
      for(let i=sparks.length-1;i>=0;i--){
        const s = sparks[i];
        s.x += s.vx;
        s.y += s.vy;
        s.vx *= 0.96;
        s.vy = s.vy*0.96 + 0.02*dpr;
        s.life -= 1;

        const alpha = Math.max(0, s.life/44);
        ctx.globalAlpha = alpha;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size*dpr, 0, Math.PI*2);
        ctx.fillStyle = "rgba(255,255,255,1)";
        ctx.fill();

        // Optional glow pass (skip on lowPower for speed)
        if (!lowPower){
          ctx.globalAlpha = alpha*0.32;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.size*4.0*dpr, 0, Math.PI*2);
          ctx.fillStyle = "rgba(255,118,200,1)";
          ctx.fill();
        }

        if(s.life<=0){
          // swap-remove (fast)
          const last = sparks.pop();
          if (i < sparks.length) sparks[i] = last;
          pool.push(s);
        }
      }
      ctx.globalAlpha = 1;
    }
    requestAnimationFrame(loop);

    // --- Buttons
    document.getElementById("btnSpark").addEventListener("click", ()=>{
      addSparks(innerWidth/2, innerHeight/3, lowPower ? 55 : 95, true);
      toast("Ø¨Ø§Ø±ÙˆÙ† Ø³ØªØ§Ø±Ù‡â€ŒØ§ÛŒ âœ¨", lowPower ? "Ø­Ø§Ù„Øª Ù…ÙˆØ¨Ø§ÛŒÙ„: Ø³Ø¨Ú©â€ŒØªØ± Ø´Ø¯." : "Ú©Ù…ÛŒ Ø§Ù…ÛŒØ¯ ØªÙˆÛŒ Ù‡ÙˆØ§Ø³Øª.");
    });

    document.getElementById("btnCheer").addEventListener("click", ()=>{
      setMood(moodIdx+1);
      addSparks(innerWidth/2, innerHeight/2, lowPower ? 28 : 42, true);
      toast("ÛŒÙ‡ Ø°Ø±Ù‡ Ø¨Ù‡ØªØ± Ø´Ø¯ ğŸŒ¸", "Ø­Ø§Ù„Øª Ø¹ÙˆØ¶ Ø´Ø¯!");
    });

    document.getElementById("btnWink").addEventListener("click", ()=>{
      const h = document.getElementById("mainHeader");
      h.style.transform = "scale(1.02) rotate(-0.6deg)";
      h.style.transition = "transform .18s ease";
      setTimeout(()=>h.style.transform="", 200);
      setMood(moodIdx+1);
      toast("Ú†Ø´Ù…Ú© Ø§Ù†ÛŒÙ…Ù‡â€ŒØ§ÛŒ ğŸ˜‰", "Ú¯ÙØªÛŒÙ… Ø´Ø§ÛŒØ¯ ØªÙ…Ø¯ÛŒØ¯â€¦ Ù†Ø¨Ø§Ø´Ù‡ØŸ");
    });

    document.getElementById("btnCopy").addEventListener("click", async ()=>{
      const txt = `Ø§Ø³ØªØ§Ø¯ ÙØ±Ø§ØªÛŒ\n@sforati \nØªÙ…Ø¯ÛŒØ¯ Ø¯Ø± Ú©Ù…ÛŒÙ† Ø§Ø³Øª Ù…Ú¯Ù‡ Ù†Ù‡ØŸğŸ˜”`;
      try{
        await navigator.clipboard.writeText(txt);
        toast("Ú©Ù¾ÛŒ Ø´Ø¯ ğŸ“‹", "Ø±ÙØª ØªÙˆÛŒ Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯.");
      }catch{
        const ta = document.createElement("textarea");
        ta.value = txt;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast("Ú©Ù¾ÛŒ Ø´Ø¯ ğŸ“‹", "Ø¨Ø§ Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†.");
      }
    });

    // --- Click cards => pulse + sparks (lighter counts on mobile)
    document.querySelectorAll(".card").forEach(card=>{
      card.addEventListener("click", ()=>{
        const r = card.getBoundingClientRect();
        addSparks(r.left + r.width*0.75, r.top + r.height*0.35, lowPower ? 16 : 26, true);
        card.animate([
          { transform: "translateY(0) scale(1)", filter:"brightness(1)" },
          { transform: "translateY(-3px) scale(1.01)", filter:"brightness(1.06)" },
          { transform: "translateY(0) scale(1)", filter:"brightness(1)" }
        ], { duration: 360, easing: "cubic-bezier(.2,.8,.2,1)" });
      }, {passive:true});
    });

    // --- Parallax (throttled: only once per animation frame)
    const girlsLayer = document.getElementById("girlsLayer");
    const hero = document.getElementById("hero");
    let pending = false;
    let px = innerWidth/2, py = innerHeight/2;

    function applyParallax(){
      pending = false;
      const rect = hero.getBoundingClientRect();
      const x = (px - (rect.left + rect.width/2)) / rect.width;
      const y = (py - (rect.top + rect.height/2)) / rect.height;

      // smaller movement on mobile
      const tx = x * (lowPower ? 10 : 18);
      const ty = y * (lowPower ? 6  : 10);
      girlsLayer.style.transform = `translate(${tx}px, ${ty}px)`;
    }

    function queueParallax(clientX, clientY){
      px = clientX; py = clientY;
      if (pending) return;
      pending = true;
      requestAnimationFrame(applyParallax);
    }

    window.addEventListener("pointermove", (e)=> queueParallax(e.clientX, e.clientY), {passive:true});
    window.addEventListener("touchmove", (e)=>{
      if(!e.touches?.length) return;
      queueParallax(e.touches[0].clientX, e.touches[0].clientY);
    }, {passive:true});

    // Click anywhere => small spark (lighter on mobile)
    window.addEventListener("pointerdown", (e)=>{
      addSparks(e.clientX, e.clientY, lowPower ? 10 : 18, true);
    }, {passive:true});

    // initial
    setMood(0);

    // Inform (optional)
    if (lowPower) {
      toast("Ø­Ø§Ù„Øª Ù…ÙˆØ¨Ø§ÛŒÙ„ ÙØ¹Ø§Ù„ Ø´Ø¯ ğŸ“±", "Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ Ø³Ø¨Ú©â€ŒØªØ± Ø´Ø¯Ù†.");
    }
  </script>
</body>
</html>
